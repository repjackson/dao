template(name='home')
    .ui.stackable.grid
        .sixteen.wide.center.aligned.column
            each selected_tags
                +unselect_tag
            .ui.left.icon.input 
                i.search.icon
                input.search_title(type='text' autofocus='')
            each tag_results
                +tag_selector
    .ui.stackable.grid.scrolling
        each docs
            .four.wide.column
                +reddit_card
                    // blockquote(class="reddit-card")
                    //     a(href="https://www.reddit.com#{permalink}") 
                    //         |#{title}
                    //     |from 
                    //     a(href="http://www.reddit.com/r/#{subreddit}") 
                    //         |r/#{subreddit}
                    // script(async src="//embed.redditmedia.com/widgets/platform.js" charset="UTF-8")            
        


template(name='reddit_card')
    .ui.stackable.grid
        .centered.row
            .fifteen.wide.center.aligned.column
                // if key_value_is 'model' 'wikipedia'
                //     .ui.header 
                //         i.wikipedia.icon
                //         |#{title}

                // else
                // a.ui.header(href="/m/reddit/#{_id}/view") #{title}
                // .ui.header #{title}
                // a.ui.small.header(href=url target='_window') #{url}
                .medscroll
                    blockquote(class="reddit-card")
                        a(href="https://www.reddit.com#{permalink}") 
                            |#{title}
                        |from 
                        a(href="http://www.reddit.com/r/#{subreddit}") 
                            |r/#{subreddit}
                script(src="//embed.redditmedia.com/widgets/platform.js" charset="UTF-8")
                each tags 
                    .ui.circular.compact.button.add_tag #{this}
                .ui.transparent.input
                    i.plus.grey.icon
                    input.tag_post(type='text')
                // unless is_image
                //     iframe.invert(width="100%" height="500" src=url frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)
                .ui.icon.circular.button.tagger
                    i.dna.icon
                // if watson
                //     +watson_view

template(name='unselect_tag')
    a.unselect_tag.ui.black.big.image.label.select_term(href='#')
        if term
            img.ui.avatar.compact.image(src=term.watson.metadata.image class=currentUser.invert_class)    
        | #{this}

template(name='tag_selector')
    a.ui.big.image.basic.label.select_tag.select_term(href='#')
        // img.ui.avatar.compact.image(src="{{c.url term.image_id height=200 width=200 gravity='face' crop='fill'}}" class=currentUser.invert_class)
        // img.ui.avatar.compact.image(src=term.rd.thumbnail class=currentUser.invert_class)
        if term
            img.ui.avatar.compact.image(src=term.watson.metadata.image class=currentUser.invert_class)    
        | #{name}


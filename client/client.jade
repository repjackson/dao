head
    title dao
    // meta(name='viewport', content='user-scalable=yes, initial-scale=1.0, maximum-scale=1.6, width=device-width')
    meta(name='viewport', content='user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width')
    meta(name='apple-mobile-web-app-capable', content='yes')
    meta(name='apple-mobile-web-app-status-bar-style', content='black')
    meta(name="msapplication-TileColor" content="#da532c")
    meta(name="theme-color" content="black")
    link(href="https://fonts.googleapis.com/css?family=Ubuntu:300,400&display=swap" rel="stylesheet")
    link(href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet")
    //- script(src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js")

    link(rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png")
    link(rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png")
    link(rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png")
    link(rel="manifest" href="/site.webmanifest")

    script(src='https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js')

    link(rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.4/dist/semantic.min.css")
    script(src="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.4/dist/semantic.min.js")

    // script(src="//embed.redditmedia.com/widgets/platform.js" charset="UTF-8")

    script.
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-156965333-1');

body
    +status
    +home
    

template(name='home')
    .ui.stackable.padded.grid
        .row
            .sixteen.wide.column
                if selected_tags
                    if many_tags
                        a#clear_tags.ui.black.icon.compact.large.circular.button.select_term
                            i.remove.icon
                each selected_tags
                    +unselect_tag
                .ui.left.icon.large.input 
                    i.search.icon
                    input.search_title(type='text' autofocus='')
                each tag_results
                    +tag_selector
                // .row
                //     .four.wide.right.aligned.column
                .ui.inline.small.header(title='results') #{doc_count}
                .ui.circular.compact.icon.large.button.set_twitter
                    i.large.twitter.icon
                .ui.circular.compact.icon.large.button.toggle_video(class=video_button_class)
                    i.large.youtube.icon
                .ui.circular.compact.icon.large.button.toggle_images(class=images_button_class)
                    i.large.picture.icon
                .ui.circular.compact.icon.large.button.toggle_reddit
                    i.large.reddit.icon
                .ui.circular.compact.icon.large.button.toggle_wiki(class=wiki_button_class)
                    i.large.wikipedia.icon

            .sixteen.wide.column
                each docs
                    if key_value 'model' 'reddit'
                        +reddit_card
                    else
                        +post_card
         
         
template(name='post_card')         
    // .ui.fluid.
    // if watson.metadata.image
    //     img.ui.rounded.inline.medium.image.invert(src=watson.metadata.image)    
    // else
    //     img.ui.image(src=url)
    a.ui.header(href=url target='_window') #{title}
    if key_value 'model' 'wikipedia'
        .invert.rounded
            iframe.rounded(width="100%" height="500" src=url frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)
        // iframe.invert(width="100%" height="500" src="https://en.m.wikipedia.org/wiki/#{title}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)
   
    if key_value 'model' 'reddit'
        .ui.header #{subreddit} subreddit
        .ui.header #{author} author
        .ui.header #{ups} ups
        |#{body}
        |#{selftext}
        // blockquote(class="reddit-card")
        //     a(href="https://www.reddit.com#{permalink}") 
        //         |#{title}
        //     |from 
        //     a(href="http://www.reddit.com/r/#{subreddit}") 
        //         |r/#{subreddit}
        // script(src="//embed.redditmedia.com/widgets/platform.js" charset="UTF-8")

    each tags 
        a.ui.large.label.add_tag #{this}
    .ui.large.circular.icon.button.vote_up
        i.thumbs.up.outline.icon
    |#{points}
    .ui.large.circular.icon.button.vote_down
        i.thumbs.down.outline.icon
                    
template(name='pull_reddit')
    .ui.circular.icon.basic.button.pull
        i.reddit.icon
        
template(name='call_watson')
    .ui.circular.icon.basic.button.pull
        i.dna.icon


template(name='unselect_tag')
    a.unselect_tag.ui.black.big.image.label.select_term(href='#')
        if term
            img.ui.avatar.compact.image(src=term.watson.metadata.image)    
        strong #{this}

template(name='tag_selector')
    a.ui.big.image.label.select_tag.select_term(href='#' title="#{count} results")
        if term
            img.ui.avatar.compact.image(src=term.watson.metadata.image)    
        | #{name}
        // small #{count}


template(name='reddit_card')
    .ui.header #{title}
    | #{url}
    div
    if is_image
        img(src=url)
    else if is_youtube
        div
        // .ui.embed
        // iframe(id="ytplayer" type="text/html" width="720" height="405" src="https://www.youtube.com/embed/M7lc1UVf-VE" frameborder="0" allowfullscreen)
        iframe.invert(width="100%" height="600" src="https://www.youtube.com/embed/#{youtube_parse}?autoplay=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)
        // iframe(width="560" height="315" src=url frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)        
    // .medscroll
    // .invert
    // blockquote(class="reddit-card")
    //     a(href="https://www.reddit.com#{permalink}") 
    //         |#{title}
    //     |from 
    //     a(href="http://www.reddit.com/r/#{subreddit}") 
    //         |r/#{subreddit}
    a.ui.fluid.basic.circular.button(href=url target='_window' title=url)
        i.external.icon
        |#{domain}
    |#{tags.length}
    each tags 
        .ui.circular.compact.button.add_tag #{this}
    .ui.transparent.input
        i.plus.grey.icon
        input.tag_post(type='text')
    // unless key_value 'domain'
    // iframe.invert(width="100%" height="500" src=url frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)
    .ui.icon.circular.button.tagger
        i.dna.icon
    // if watson
    //     +watson_view

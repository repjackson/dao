template(name='nav')
    .ui.fluid.borderless.inverted.fixed.menu.topnav
        a.icon.item.toggle_sidebar
            i.large.bars.icon
        a.icon.item(href="/" class="{{isActivePath 'home'}}")
            // img.ui.avatar.compact.image(src="{{c.url 'one_logo' height=200 width=200 gravity='face' crop='fill'}}")
            i.large.home.icon
        if currentUser
            a.item.set_member.mobile.hidden(href="/m/member" class="{{isActiveRoute 'users'}}" title='players')
                i.large.users.icon
                | members
            // a.item.set_event(href="/m/event" class="{{isActiveRoute 'events'}}" title='events')
            //     +icolor name='calendar'
            //     // i.large.calendar.icon
            //     span.mobile.hidden events
            a.icon.item.mobile.hidden(href="/events" class="{{isActiveRoute 'events'}}" title='events')
                i.large.calendar.icon
                // +icolor name='calendar'
                span.mobile.hidden
                    |&nbsp;
                    |events
                
            a.item.mobile.hidden(href="/feed" class="{{isActiveRoute 'feed'}}" title='feed')
                i.large.blog.icon
                // +icolor name='news'
                span.mobile.hidden
                    |feed
            a.item.mobile.hidden(href="/m/request" class="{{isActiveRoute 'requests'}}" title='requests')
                i.large.concierge.bell.icon
                // +icolor name='request-service'
                |requests
            if is_admin
                a.icon.item.mobile.hidden(href="/m/model" class="{{isActivePath regex='model'}}" title='models')
                    i.database.icon
        .right.menu
            a.icon.item.mobile.hidden(href="/chat" title='chat') 
                i.chat.large.icon
            if is_in_admin
                a.icon.item.toggle_admin
                    if is_admin
                        i.shield.blue.large.icon
                    else
                        i.shield.large.icon
            if currentUser
                a.large.item.profile_sidebar(class="{{isActivePath regex='profile_layout'}}")
                    //- i.large.user.large.icon
                    if currentUser.profile_image_id
                        img.ui.avatar.compact.image(src="{{c.url currentUser.profile_image_id height=200 width=200 gravity='face' crop='fill'}}")
                    else 
                        i.large.user.large.icon
                    strong #{currentUser.username}
                    small
                        |#{currentUser.points}p
            else
                // a.item(href="/register" title='register')
                //     // |login
                //     +icon name='plus'
                //     // i.large.chevron.right.icon
                a.item(href="/login" title='login')
                    // |login
                    +icon name='login-rounded-right'
                    // i.large.chevron.right.icon

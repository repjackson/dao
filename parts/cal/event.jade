template(name='events')
    .ui.stackable.padded.grid 
        .row
            .sixteen.wide.column
                .ui.inline.header
                    i.orange.calendar.icon
                    |events
                if can_add_event
                    .ui.circular.basic.icon.button.add_event(title='add event')
                        i.plus.big.green.icon
                .ui.large.basic.circular.button.toggle_past
                    if viewing_past
                        i.checkmark.large.green.icon
                    else
                        i.circle.outline.large.icon
                    |past
                .spacer
                .spacer
                .ui.stackable.five.cards
                    each events
                        +event_card

template(name='event_card')
    .ui.card
        if image_id
            a.image.zoom.pointer.mobile.hidden(href="/event/#{_id}/view")
                img.ui.image(src="{{c.url image_id height=500 width=500 gravity='face' crop='fill'}}")
            a.image.zoom.pointer.mobile.only(href="/event/#{_id}/view")
                img.ui.image(src="{{c.url image_id height=200 width=500 gravity='center' crop='fill'}}")
        .content
            a.ui.header(href="/event/#{_id}/view") #{title} 
            div
            .ui.small.header {{medium_date date}} #{time}
            // .ui.inline.small.header {{long_date start_datetime}}
            // div
            // .ui.small.grey.inline.header {{from_now start_datetime}}
        .content
            if location
                i.marker.icon 
                |#{location}
            div 
            small led by
            img.ui.avatar.image(src="{{c.url fac.profile_image_id height=200 width=200 gravity='face' crop='fill'}}")
            strong #{fac.name}
        .content
            |#{event_tickets.count}
            a(href="/m/event/#{_id}/view" title='ticket purchase required')
                i.checkmark.green.link.icon
            | #{going.count}
            each going
                img.ui.avatar.image(src="{{c.url profile_image_id height=200 width=200 gravity='face' crop='fill'}}")
            i.question.orange.link.icon(title='call yourself maybe')
            div
            | #{maybe_user_ids.length}
            each maybe_going
                img.ui.avatar.image(src="{{c.url profile_image_id height=200 width=200 gravity='face' crop='fill'}}")
            | #{not_user_ids.length}
            div
            i.remove.red.link.icon(title='mark yourself not')
            each not_going
                img.ui.avatar.image(src="{{c.url profile_image_id height=200 width=200 gravity='face' crop='fill'}}")
            if doc_comments.count
                .meta
                    each doc_comments 
                        i.grey.chat.outline.icon
                        img.ui.avatar.image(src="{{c.url _author.profile_image_id height=200 width=200 gravity='face' crop='fill'}}" class=user_class)
                        |#{body}
            if is_dev
                +print_this






template(name='gcal_button')
    a.ui.circular.basic.circular.large.button(href="http://www.google.com/calendar/event?action=TEMPLATE&text=#{title}&dates=#{start_datetime}/#{end_datetime}&details=#{description}&location=#{location}" target="_window")
        i.calendar.icon
        |add to gcal
        
        
        
        

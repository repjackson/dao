template(name='debit_edit')
    with current_doc
        .ui.stackable.padded.grid
            .row 
                .five.wide.column
                    .ui.large.fluid.basic.circular.button.cancel_debit
                        i.large.remove.red.icon
                        |cancel
                    // .ui.segment
                    //     .ui.inline.grey.header sender
                    //     .ui.inline.header
                    //         img.ui.small.image(src="{{c.url _author.profile_image_id height=200 width=200 gravity='face' crop='fill'}}")
                    //         |#{_author.username}
                    .ui.segment
                        with recipient
                            .ui.header recipient
                            i.large.remove.link.icon.remove_recipient
                            a.pointer(href="/user/#{username}")
                                img.ui.tiny.inline.image(src="{{c.url profile_image_id height=400 width=400 gravity='face' crop='fill'}}")
                                .ui.inline.header #{username}
                                .ui.small.grey.inline.header #{points}
                        unless recipient
                            .ui.divider
                            // i.large.user.plus.icon
                            +single_user_edit key='recipient_id' label='select recipient' icon='user plus' direct=true
                            // .ui.icon.input
                            //     i.search.icon
                            //     input.search_username(type='text' placeholder='username')
                            // each members
                            //     .ui.compact.basic.circular.button.add_recipient
                            //         // i.plus.icon
                            //         img.ui.avatar.image(src="{{c.url profile_image_id height=200 width=200 gravity='face' crop='fill'}}")
                            //         |#{name}
                            //         small #{points}p
                    +boolean_edit key='has_datetime' label='has datetime' direct=true
                    if has_datetime
                        +datetime_edit key='datetime' label='datetime' direct=true   
                        // +time_edit key='time' label='time' direct=true   
                    +array_edit key='location_tags' label='location tags' icon='marker' direct=true
                .six.wide.column
                    +textarea_edit key='description' label='description' direct=true
                    +image_edit key='image_id' label='image' direct=true
                    div 
                    div
                    +smart_tagger
                .five.wide.center.aligned.column
                    .ui.small.grey.header 100pts = 1 credit
                    .ui.big.header #{amount}pts
                    .ui.big.input
                        input.point_amount(type='number' value=amount min='1')
                    div
                    +key_value_edit key='amount' value=1
                    +key_value_edit key='amount' value=5
                    +key_value_edit key='amount' value=10
                    +key_value_edit key='amount' value=25
                    +key_value_edit key='amount' value=50
                    +key_value_edit key='amount' value=100
                    +key_value_edit key='amount' value=250
                    +key_value_edit key='amount' value=500
                    +key_value_edit key='amount' value=1000
                    +key_value_edit key='amount' value=2000
                    +key_value_edit key='amount' value=5000
                    .spacer
                    .ui.center.aligned.basic.segment
                        if can_submit
                            .ui.green.massive.circular.circular.icon.button.submit
                                i.big.send.icon
                                // |send
                        else 
                            .ui.green.massive.circular.disabled.circular.icon.button
                                i.send.big.icon
                                // |send




template(name='debit_view')
    with current_doc
        .ui.stackable.padded.grid
            .centered.row 
                .five.wide.column
                    a(href="/user/#{_author.username}") 
                        img.ui.circular.centered.pointer.zoom.image(src="{{c.url _author.profile_image_id height=500 width=500 gravity='face' crop='fill'}}")
                        .ui.large.center.aligned.header.pointer.zoom
                            |#{_author.username}
                .five.wide.column
                    .ui.huge.center.aligned.header
                        |#{amount}pts
                    if is_dev
                        +remove_button
                    .f14
                        |#{description}
                    .spacer
                    +image_view key='image_id' label='image' direct=true
                    div 
                    if tags
                        i.tags.icon
                        each tags 
                            .ui.big.basic.circular.label #{this}
                    +voting_full
                    .ui.small.header
                        i.clock.icon
                        | #{when}
                    .spacer
                    .spacer
                    +comments
                    //- +array_view key='location_tags' label='location_tags' direct=true
                .five.wide.column
                    a(href="/user/#{recipient.username}")
                        img.ui.circular.centered.fluid.pointer.zoom.image(src="{{c.url recipient.profile_image_id height=500 width=500 gravity='face' crop='fill'}}")
                        .ui.large.center.aligned.header.pointer.zoom
                            |#{recipient.name}
                            

